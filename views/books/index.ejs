<% layout('layouts/boilerplate.ejs')%>
<style>
    .wrapper {
  margin-left:75%;
  margin-top: 1%;
  
}
#search-container {
  margin: 0.5em 0;
}
#search-container input {
  background-color: transparent;
  width: 35vh;
  height: 40px;
  border-radius: 5px;
  border-bottom: 2px solid #110f29;
  padding: 0.7em 0.3em;

}
#search-container input:focus {
  border-bottom-color: #6759ff;
}
  
</style>
<div class="wrapper">
  <div id="search-container">
      <input
        type="search"
        id="search-input"
        placeholder="Search book name here.."
      onkeyup="searchfun()">
    </div>
    </div>
    <div id="Allbooks">
    <% for (let book of books) { %>
        <div class="card">
            <div class="row">
                <div class="col-md-4">
                    <img src="<%=book.images%> " alt="" class="img-fluid mt-4 mb-4 ms-4" width="230" height="160">
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <div class="title" id="title">
                        <%= book.title %>
                    </div>
                        <p class="card-text"><%= book.description %> </p>
                        <p class="card-text">
                            <small class="text-muted">Edition: <%= book.edition %> </small> <br>
                            <small class="text-muted">Available Copies: <%= book.availableCopies %> </small>
                        </p>
                        <p>
                        <a class="btn btn-primary" href="/books/<%=book._id%>">View <%=book.title%> </a>
                    </p>
                    </div>
                </div>
            </div>
        </div>
        <br>
    <% } %>
</div>
    <script>
        const searchfun=()=>{
            let filter =document.getElementById('search-input').value.toUpperCase();
            let Allbook =document.getElementById('Allbooks');
            let bk=Allbook.getElementsByClassName('card');
            
            for(var i=0; i<bk.length;i++){
                let title=bk[i].firstElementChild.innerText;
                if(title.toUpperCase().indexOf(filter)>-1){
                   bk[i].style.display="";
                }else{
                  bk[i].style.display="none";
                }
            }
        }
    </script>